package gestionturnos.model.manager;

import java.util.List;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

import com.sun.corba.se.spi.orbutil.fsm.Guard.Result;

import gestionturnos.model.entities.Area;
import gestionturnos.model.entities.Usuario;

/**
 * Session Bean implementation class ManagerUsuario
 */
@Stateless
@LocalBean
public class ManagerUsuario {
	@PersistenceContext
	private EntityManager em;

    /**
     * Default constructor. 
     */
    public ManagerUsuario() {
        // TODO Auto-generated constructor stub
    }
    public List<Usuario> findallUsuario(){
    	String consulta="Select o from  Usuario o order by o.apellidos";
    	Query q=em.createQuery(consulta, Usuario.class);
    	return q.getResultList();  	
    }
    public Usuario findUsuarioById(int idUsuario) {
		return em.find(Usuario.class, idUsuario);
	}
    public void eliminarUsuario(int idUsuario) {
    	Usuario usuario = findUsuarioById(idUsuario);
		if (usuario!= null)
			em.remove(usuario);
	}
    public void insertarUsuario(Usuario usuario) {
    	em.persist(usuario);
    }
    public void actualizarUsuario(Usuario usuario) throws Exception {
		Usuario user = findUsuarioById(usuario.getIdUsuario());
		if (user == null)
			throw new Exception("No existe el Usuario con el Id especificada");
		user.setCedula(usuario.getCedula());
		user.setNombres(usuario.getNombres());
		user.setApellidos(usuario.getApellidos());
		user.setFechaNacimiento(usuario.getFechaNacimiento());
		user.setDireccion(usuario.getDireccion());
		user.setEmail(usuario.getEmail());
		user.setClave(usuario.getClave());
		em.merge(user);
	}


}
